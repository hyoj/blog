{:title "스프링 클라우드 컨피그 사용하기"
 :layout :post
 :tags  ["Spring", "Spring Cloud"]
}

== 스프링 클라우드 컨피그 서버 암호화 키 설정하기
스프링 클라우드 컨피그 서버에서 사용되는 대칭 암호화 키는 `ENCRYPT_KEY` 라는 운영 체제의 환경 변수를 사용합니다.

스프링 클라우드 컨피그 인스턴스가 실행할 때 `ENCRYPT_KEY` 환경 변수 설정을 감지하고 2개의 엔드포인트 (`/encrypt`, `/decrypt`)를 서비스에 자동으로 추가합니다.

[NOTE]
====
.대칭 키 유의사항
대칭 키로 적절한 문자열은 무엇인가요?::
대칭 키 길이는 12자 이상이어야 하며, 기억하기 어려운 무작위 문자를 사용하는 것이 좋습니다.
실제 배포환경에서는 환경별로 다른 암호화 키를 사용하고 무작위 문자를 키로 사용합니다.

대칭 키를 분실하면 어떻게 되나요?::
대칭 키로 사용한 문자를 분실하면 암호화 했던 문자열은 그 키 없이 복호화 할 수 없습니다.

암호화 키를 (예: ENCRYPT_KEY 환경변수) Dockerfile 안에 하드 코딩하지 말 것::
실제 런타임 환경에서는 Dockerfile 안에서 운영 체제의 환경 변수를 참조하도록 만듭니다.
====

== 스프링 클라우드 컨피그 서버 프로퍼티 복호화 비활성화 하기

.confsvr/src/main/resources/bootstrap.yml
[source,yaml]
----
cloud.config.server.encrypt.enabled=false
----
클라우드 컨피그의 서버 측 복호화 프로퍼티를 비활성화 하려면 위와 같이 설정합니다.

클라우드 컨피그 서버 측 복호화 프로퍼티를 활성화(true) 하면 컨피그 서버에서 모든 프로퍼티의 복호화를 수행합니다. 프로퍼티 파일에서 중요 정보를 암호화해두었더라도 복호화 프로퍼티를 활성화하면 엔드포인트를 호출했을 때 복호화되어 평문으로 표시됩니다.

//== 클라이언트 측에서 복호화 하기 //TODO

